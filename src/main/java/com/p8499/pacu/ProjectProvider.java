package com.p8499.pacu;

import com.jayway.jsonpath.Configuration;
import com.p8499.pacu.model.Project;

import java.io.*;

/**
 * Created by Administrator on 6/14/2018.
 */
public final class ProjectProvider {
    public static Project load(String fileName) throws IOException {
        return load(new File(fileName));
    }

    public static Project load(File file) throws IOException {
        FileInputStream fileInputStream = new FileInputStream(file);
        Project project = load(fileInputStream);
        fileInputStream.close();
        return project;
    }

    public static Project load(InputStream inputStream) {
        return new Project(Configuration.defaultConfiguration().jsonProvider().parse(inputStream, "UTF-8"));
    }

    public static Project empty() {
        return parse("{\"name\":\"MyProject\",\"envJtee\":{\"app\":\"\",\"packageBean\":\"\",\"packageMask\":\"\",\"packageMapper\":\"\",\"packageService\":\"\",\"packageConfigurator\":\"\",\"packageController\":\"\",\"packageControllerAttachment\":\"\",\"datasources\":[],\"baseUrl\":\"\",\"packageBase\":\"\",\"packageControllerBase\":\"\"},\"envAndroid\":{\"packageBean\":\"\",\"packageMask\":\"\",\"packageStub\":\"\",\"app\":\"\",\"packageBase\":\"\",\"packageView\":\"\"},\"modules\":[]}");
    }

    public static Project sample() {
        return parse("{\"name\":\"Sales\",\"envJtee\":{\"app\":\"sales\",\"baseUrl\":\"http://127.0.0.1/\",\"packageBase\":\"test.sales\",\"packageBean\":\"test.sales.bean\",\"packageMask\":\"test.sales.mask\",\"packageMapper\":\"test.sales.mapper\",\"packageService\":\"test.sales.service\",\"packageControllerBase\":\"test.sales.controller.base\",\"datasources\":[{\"id\":\"db01\",\"databaseType\":\"oracle\",\"url\":\"jdbc:oracle:thin:@127.0.0.1:1521:db01\",\"username\":\"username\",\"password\":\"password\"}]},\"envAndroid\":{\"app\":\"sales_gen\",\"packageBase\":\"test.sales.gen\",\"packageBean\":\"test.sales.gen.bean\",\"packageMask\":\"test.sales.gen.mask\",\"packageStub\":\"test.sales.gen.stub\",\"packageView\":\"test.sales.gen.view\"},\"modules\":[{\"id\":\"Employee\",\"description\":\"Employee master table\",\"comment\":\"\",\"datasource\":\"db01\",\"databaseTable\":\"F0101\",\"databaseView\":\"F0101View\",\"jteeBeanAlias\":\"Employee\",\"jteeMaskAlias\":\"EmployeeMask\",\"jteeMapperAlias\":\"EmployeeMapper\",\"jteeServiceAlias\":\"EmployeeService\",\"jteeControllerBaseAlias\":\"EmployeeControllerBase\",\"jteeControllerPath\":\"api/Employee/\",\"jteeControllerAttachmentPath\":\"api/Employee_attachment/\",\"androidBeanAlias\":\"Employee\",\"androidMaskAlias\":\"EmployeeMask\",\"androidStubAlias\":\"EmployeeStub\",\"androidViewAlias\":\"EmployeeView\",\"androidListViewAlias\":\"EmployeeListView\",\"fields\":[{\"source\":\"table\",\"databaseColumn\":\"emid\",\"description\":\"Employee ID\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":4,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"emstatus\",\"description\":\"Employee Status\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":1,\"fractionLength\":0,\"defaultValue\":\"0\",\"values\":[{\"value\":\"0\",\"code\":\"VALID\",\"label\":\"Valid\"},{\"value\":\"1\",\"code\":\"INVALID\",\"label\":\"Invalid\"}]},{\"source\":\"table\",\"databaseColumn\":\"emgender\",\"description\":\"Employee Gender\",\"notnull\":true,\"javaType\":\"String\",\"stringLength\":1,\"integerLength\":0,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[{\"value\":\"M\",\"code\":\"MALE\",\"label\":\"Male\"},{\"value\":\"F\",\"code\":\"FEMALE\",\"label\":\"Female\"}]},{\"source\":\"table\",\"databaseColumn\":\"emname\",\"description\":\"Employee Name\",\"notnull\":false,\"javaType\":\"String\",\"stringLength\":64,\"integerLength\":0,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"view\",\"databaseColumn\":\"emamount\",\"description\":\"Total Sales Amount\",\"notnull\":false,\"javaType\":\"Double\",\"stringLength\":0,\"integerLength\":0,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]}],\"uniques\":[{\"key\":true,\"serial\":false,\"items\":[\"emid\"]}],\"references\":[]},{\"id\":\"Product\",\"description\":\"Product master table\",\"comment\":\"\",\"datasource\":\"db01\",\"databaseTable\":\"F4101\",\"databaseView\":\"F4101View\",\"jteeBeanAlias\":\"Product\",\"jteeMaskAlias\":\"ProductMask\",\"jteeMapperAlias\":\"ProductMapper\",\"jteeServiceAlias\":\"ProductService\",\"jteeControllerBaseAlias\":\"ProductControllerBase\",\"jteeControllerPath\":\"api/Product/\",\"jteeControllerAttachmentPath\":\"api/Product_attachment/\",\"androidBeanAlias\":\"Product\",\"androidMaskAlias\":\"ProductMask\",\"androidStubAlias\":\"ProductStub\",\"androidViewAlias\":\"ProductView\",\"androidListViewAlias\":\"ProductListView\",\"fields\":[{\"source\":\"table\",\"databaseColumn\":\"imid\",\"description\":\"Product ID\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":8,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"imname\",\"description\":\"Product Name\",\"notnull\":false,\"javaType\":\"String\",\"stringLength\":64,\"integerLength\":0,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"imprice\",\"description\":\"Product Price\",\"notnull\":true,\"javaType\":\"Double\",\"stringLength\":0,\"integerLength\":6,\"fractionLength\":2,\"defaultValue\":\"0.00\",\"values\":[]},{\"source\":\"view\",\"databaseColumn\":\"imamount\",\"description\":\"Total Sales Amount\",\"notnull\":false,\"javaType\":\"Double\",\"stringLength\":0,\"integerLength\":0,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]}],\"uniques\":[{\"key\":true,\"serial\":true,\"items\":[\"imid\"]}],\"references\":[]},{\"id\":\"Record\",\"description\":\"Sales record table\",\"comment\":\"\",\"datasource\":\"db01\",\"databaseTable\":\"F4211\",\"databaseView\":\"F4211View\",\"jteeBeanAlias\":\"Record\",\"jteeMaskAlias\":\"RecordMask\",\"jteeMapperAlias\":\"RecordMapper\",\"jteeServiceAlias\":\"RecordService\",\"jteeControllerBaseAlias\":\"RecordControllerBase\",\"jteeControllerPath\":\"api/Record/\",\"jteeControllerAttachmentPath\":\"api/Record_attachment/\",\"androidBeanAlias\":\"Record\",\"androidMaskAlias\":\"RecordMask\",\"androidStubAlias\":\"RecordStub\",\"androidViewAlias\":\"RecordView\",\"androidListViewAlias\":\"RecordListView\",\"fields\":[{\"source\":\"table\",\"databaseColumn\":\"reid\",\"description\":\"Record ID\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":8,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"reimid\",\"description\":\"Product ID\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":8,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"reemid\",\"description\":\"Employee ID\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":4,\"fractionLength\":0,\"defaultValue\":\"\",\"values\":[]},{\"source\":\"table\",\"databaseColumn\":\"reqty\",\"description\":\"Quantity\",\"notnull\":true,\"javaType\":\"Integer\",\"stringLength\":0,\"integerLength\":4,\"fractionLength\":0,\"defaultValue\":\"1\",\"values\":[]}],\"uniques\":[{\"key\":true,\"serial\":true,\"items\":[\"reid\"]}],\"references\":[{\"domestics\":[\"reimid\"],\"foreignModule\":\"Product\",\"foreigns\":[\"imid\"]},{\"domestics\":[\"reemid\"],\"foreignModule\":\"Employee\",\"foreigns\":[\"emid\"]}]}]}");
    }

    public static Project parse(String json) {
        return new Project(Configuration.defaultConfiguration().jsonProvider().parse(json));
    }
}
